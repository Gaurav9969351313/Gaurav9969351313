# Angular Performance Optimization Using trackBy Function | by Bharathiraja | JavaScript in Plain English

Member-only story

# Angular Performance Optimization Using trackBy Function

## The problem with ngFor and how to solve it

[

![Bharathiraja](https://miro.medium.com/v2/resize:fill:64:64/1*Bd7LOZPL8uTXTQwmFaiLlQ.png)





](https://bharathirajatut.medium.com/?source=post_page---byline--bd2cad4acee---------------------------------------)

[Bharathiraja](https://bharathirajatut.medium.com/?source=post_page---byline--bd2cad4acee---------------------------------------)

Follow

3 min read

·

Mar 9, 2021

134

1

Listen

Share

More

![](https://miro.medium.com/v2/resize:fit:1875/1*GEg_IK1M7aQ3C3c4rOp55A.png)

In this tutorial, we are going to see an optimization technique in **Angular**. The section we are going to focus on is an array of data. We always use the **ngFor** to iterate the array of data in Angular. The ngFor loop through the array and will display the individual data as output.

We are not worried about how the ngFor works?. Why because most of the time we used only fewer data in the array. A few data in the array do not create a **performance** **problem** in Angular if we use the ngFor to iterate the data. But if you use more data such as 1k or more rows then definitely you will feel the slowness in rendering the output.

First, we will learn, how the ngFor works?. Then we will learn, how to solve the slowness(performance issue) using the **trackBy** function.

**How ngFor Works?:**

Assume we have the below data.

<iframe src="https://javascript.plainenglish.io/media/b1f2bf87908bd1d422f8cf442d75b052" allowfullscreen="" frameborder="0" height="146" width="680" title="home.ts" class="eo n hi dz bg" scrolling="no"></iframe>

HTML code to render the array values.

<iframe src="https://javascript.plainenglish.io/media/0c21b9420a36558b82663f0d353e89b2" allowfullscreen="" frameborder="0" height="190" width="680" title="home.html" class="eo n hi dz bg" scrolling="no"></iframe>

When we iterate the data using the ngFor, each time, the whole <li> tag will be **deleted** and it will **re-create** the <li> again. When we add new data, each time the DOM will be created dynamically. It is the problem for rendering the output. Instead of adding a new <li> tag to a new data, the ngFor deletes all the <li> and it creates the <li> tag again. It is a time-consuming process. It causes the performance problem in Angular.

Like said earlier, we never noticed the performance problem in Angular using ngFor. Why because we always used **fewer** **data** only. So if you have more data in the array, then it is wiser to implement the trackBy to avoid this problem.

**Without TrackBy Function:**

We will simulate how the <li> tags are re-created each time. Place the below code in your ts file.

<iframe src="https://javascript.plainenglish.io/media/f0c324cbe7feaf0e9bdbce3452b54d83" allowfullscreen="" frameborder="0" height="410" width="680" title="home.ts" class="eo n hi dz bg" scrolling="no"></iframe>

Place the below code in your HTML file.

<iframe src="https://javascript.plainenglish.io/media/30160e7b34b558aa69c2b3a5379fe71b" allowfullscreen="" frameborder="0" height="300" width="680" title="home.html" class="eo n hi dz bg" scrolling="no"></iframe>

Now click the **Add Product** button, the new product will be added to the list and it will be displayed. Now if you look at the code in your **inspect element mode**, you are able to see how the <li> tags are re-created like the below image.

![](https://miro.medium.com/v2/resize:fit:875/1*fjzD9qryhbgugjlkWpgzjg.png)
inspect element mode for without trackby

So whenever new data added, It will delete all the <li> tags and create the <li> tag again.

**With TrackBy Function:**

To avoid this problem, we can create a function like the below in the ts file.

<iframe src="https://javascript.plainenglish.io/media/5899eb4242e2d1d5f6e6c75a827cb118" allowfullscreen="" frameborder="0" height="498" width="680" title="home.ts" class="eo n hi dz bg" scrolling="no"></iframe>

Add the function to ngFor using the trackBy in your HTML file.

<iframe src="https://javascript.plainenglish.io/media/4793818ad9a1e49494897e0dbc3afd08" allowfullscreen="" frameborder="0" height="300" width="680" title="home.html" class="eo n hi dz bg" scrolling="no"></iframe>

Now if you click the Add Product button, it **does not re-create** all the <li> tags. Instead, it will add only one <li> tag at the end. How this is possible?. Why because the trackBy function tracks new records using the index value.

Rendering output in the inspect element mode:

![](https://miro.medium.com/v2/resize:fit:875/1*0Ihiek9I9aMJxQCFUiHmGQ.png)

## **Conclusion**

In this tutorial, we learned, what is the problem with **ngFor** in Angular and how to solve this problem using the **trackBy** function. Always use the trackBy function if you have fewer data or if you have large data. It is the recommended approach for Angular developers.

I hope this article has been helpful. Thank you for taking the time to read it!

## Embedded Content

product\_list:any\[\]\=\[

{id:1,name:"Apple"},

{id:2,name:"Orange"},

{id:3,name:"Banana"}

\]

[view raw](https://gist.github.com/bharathirajatut/2eeea976fb4125afd304893a2adb39bb/raw/5c515fba2d2837334a5bf71cd92b2e20a1157805/home.ts) [home.ts](https://gist.github.com/bharathirajatut/2eeea976fb4125afd304893a2adb39bb#file-home-ts) hosted with ❤ by [GitHub](https://github.com)

<iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;"></iframe>

---

<ul\>

<li \*ngFor\="let x of product\_list;"\>

{{x.name}}

</li\>

</ul\>

[view raw](https://gist.github.com/bharathirajatut/30e7f6845edd84f40124feccbb2e05ee/raw/e8fdb7ab50d82c264e2d151870e6f5912d4ce06b/home.html) [home.html](https://gist.github.com/bharathirajatut/30e7f6845edd84f40124feccbb2e05ee#file-home-html) hosted with ❤ by [GitHub](https://github.com)

<iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: none; visibility: hidden;"></iframe>

---

product\_list:any\[\]\=\[

{id:1,name:"Apple"},

{id:2,name:"Orange"},

{id:3,name:"Banana"}

\]

addProduct()

{

this.product\_list\=\[

{id:1,name:"Apple"},

{id:2,name:"Orange"},

{id:3,name:"Banana"},

{id:4,name:"Pine Apple"}

\]

}

[view raw](https://gist.github.com/bharathirajatut/27428473b51bf8cb364eb7290e9b4086/raw/b0b52f8f7cb955bad73d25bc23fdeee59c8af40c/home.ts) [home.ts](https://gist.github.com/bharathirajatut/27428473b51bf8cb364eb7290e9b4086#file-home-ts) hosted with ❤ by [GitHub](https://github.com)

---

<div style\="margin-left:200px;margin-top:200px"\>

<ul\>

<li \*ngFor\="let x of product\_list;"\>

{{x.name}}

</li\>

</ul\>

<br\>

<button (click)\="addProduct()"\>Add Product</button\>

</div\>

[view raw](https://gist.github.com/bharathirajatut/f27457b03a08a9e3d2aee1d20c72a2d7/raw/2ac228f975f772a7fdf8e0232f33816f3713acef/home.html) [home.html](https://gist.github.com/bharathirajatut/f27457b03a08a9e3d2aee1d20c72a2d7#file-home-html) hosted with ❤ by [GitHub](https://github.com)

---

product\_list:any\[\]\=\[

{id:1,name:"Apple"},

{id:2,name:"Orange"},

{id:3,name:"Banana"}

\]

addProduct()

{

this.product\_list\=\[

{id:1,name:"Apple"},

{id:2,name:"Orange"},

{id:3,name:"Banana"},

{id:4,name:"Pine Apple"}

\]

}

trackByFuntion(index, item) {

return index;

}

[view raw](https://gist.github.com/bharathirajatut/43764bf7d9b423fdf8103cdf69d06bf6/raw/9de9caa8e80d11d130775aa7f92dda95445ba47f/home.ts) [home.ts](https://gist.github.com/bharathirajatut/43764bf7d9b423fdf8103cdf69d06bf6#file-home-ts) hosted with ❤ by [GitHub](https://github.com)

---

<div style\="margin-left:200px;margin-top:200px"\>

<ul\>

<li \*ngFor\="let x of product\_list;trackBy: trackByFuntion"\>

{{x.name}}

</li\>

</ul\>

<br\>

<button (click)\="addProduct()"\>Add Product</button\>

</div\>

[view raw](https://gist.github.com/bharathirajatut/19deb1b1c87539fed46535c77304721f/raw/2db9d9fdd3e5ada98c9b6386ac7678939c9f8745/home.html) [home.html](https://gist.github.com/bharathirajatut/19deb1b1c87539fed46535c77304721f#file-home-html) hosted with ❤ by [GitHub](https://github.com)

---
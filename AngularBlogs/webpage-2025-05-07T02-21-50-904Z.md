# Cache It Right: Top Frontend Interview Questions on HTTP Caching — Part 2 | by Frontend Jirachi | Bootcamp | Medium

Member-only story

# Cache It Right: Top Frontend Interview Questions on HTTP Caching — Part 2

[

![Frontend Jirachi](https://miro.medium.com/v2/resize:fill:64:64/1*F8RZPdh418ZJdejeON5idQ.png)





](/@FrontendJirachi?source=post_page---byline--54034cf348ff---------------------------------------)

[Frontend Jirachi](/@FrontendJirachi?source=post_page---byline--54034cf348ff---------------------------------------)

Follow

4 min read

·

Apr 30, 2023

59

Listen

Share

More

![](https://miro.medium.com/v2/resize:fit:875/0*1Qfv3wlJsEEW4UbP.jpeg)
Photo by Brett Jordan on Unsplash

In previous [Cache It Right: Top Frontend Interview Questions on HTTP Caching — Part 1](/design-bootcamp/cache-it-right-top-frontend-interview-questions-on-http-caching-part-1-d852c3b75f90), we discussed:

-   Basic concepts of caching
-   Benefits of using caching in web applications
-   Common http response status code for cached resources
-   Some commonly asked http headers for caching

In today’s article, we will showcase some **common cache settings** you need to be aware of for different resource types & scenarios.

# Default: Heuristic caching

Heuristic caching is a workaround that came before `Cache-Control` support became widely adopted, and basically all responses should explicitly specify a `Cache-Control` header.

Date: Wed, 23 Feb 2023 00:00:00 GMT  
Last-Modified: Wed, 23 Feb 2023 00:00:00 GMT

In this example, even if no `Cache-Control` is given, responses will get stored and reused if certain conditions are met. This is called heuristic caching([since HTTP is designed to cache as much as possible](https://developer.mozilla.org/en-US/docs/web/http/caching#heuristic_caching)).

> The client stores this response (despite the lack of `max-age`) and reuses it for a while.

# Use case: long-lived caching for versioned URLs

Cache-Control: max\-age=31536000

**This setting is also good for immutable resources. (like your versioned JavaScript, CSS, Images).**

In modern web development, JavaScript and CSS resources are frequently updated as development progresses. Also, if the versions of JavaScript and CSS resources that a client uses are out of sync, the display will break.

Therefore, you can serve the JavaScript and CSS with URLs that include a changing part based on a version number or hash value.

When responding to requests for URLs that contain versioning information, if the content is never meant to change, add `Cache-Control: max-age=31536000` to your responses.

\# version in filename  
bundle-v111.js  
\# version in query param  
bundle.js?v=111  
\# hash in filename  
bundle-md5hashvalue.js  
\# hash in query  
bundle.js?v=md5hashvalue

Setting this value tells the browser that whenever it needs to load the same URL anytime over the next one year (31,536,000 seconds), it can immediately use the value in the HTTP Cache, without having to make a network request to your web server at all.

For example, at AWS, when you make changes to the frontend codebase, it usually involves deploying a new versioned JavaScript bundle. You can see the cache-control header in the below screenshot.

![](https://miro.medium.com/v2/resize:fit:675/1*-MJixW7ewQo76Y6tpq_E2w.png)
Cache-control setting for versioned JavaScript bundle

Build tools like webpack can [automate the process](https://webpack.js.org/guides/caching/#output-filenames) of assigning hash fingerprints to your asset URLs.

You can also add the `[immutable](https://developer.mozilla.org/docs/Web/HTTP/Headers/Cache-Control#Revalidation_and_reloading)` [property](https://developer.mozilla.org/docs/Web/HTTP/Headers/Cache-Control#Revalidation_and_reloading) to your `Cache-Control` header as a further optimization, though it [will be ignored](https://www.keycdn.com/blog/cache-control-immutable#browser-support) in some browsers.

# Use case: when you don’t want to share resource with others

If the response contains personalized content, and you don’t want the content to be unexpectedly visible to others, add the **private** directive to Cache-Control header.

Cache-Control: private

In this, case, using the `private` directive will cause the personalized response to only be stored with the specific client and not be leaked to any other user of the cache.

# Use case: when you want to provide up-to-date content every time

You may be tempted to use the `no-store` directive. The `no-store` directive prevents a response from being stored but does not delete any already-stored response for the same URL.

If there is an old response already stored for a particular URL, returning `no-store` will not prevent the old response from being reused.

However, a `no-cache` directive will force the client to send a validation request before reusing any stored response.

Cache-Control: no\-cache, no\-store

![](https://miro.medium.com/v2/resize:fit:684/1*BUeRnYRKHx640eN-KEKRnA.png)
Cache-control setting for AWS html page

In this pattern you can also add an `ETag` (a version ID of your choosing) or `Last-Modified` date header to the response. Next time the client fetches the resource, it echoes the value for the content it already has via `If-None-Match` and `If-Modified-Since` respectively, allowing the server to say "Just use what you've already got, it's up to date", or as it spells it, "HTTP 304".

# Use case: use service worker to serve offline content

This is a great read for how to set up service worker and their cache settings:

[Caching best practices & max-age gotchas — JakeArchibald.com](https://jakearchibald.com/2016/caching-best-practices/)

In short

self.addEventListener('install', (event) => {  
  event.waitUntil(  
    caches  
      .open(\`static-${version}\`)  
      .then((cache) =>  
        cache.addAll(\[  
          '/root.html',  
          '/script-v123.js',  
          '/styles-v234.css',  
          '/img-v123.jpg',  
        \]),  
      ),  
  );  
});

For the root html page, its Cache-Controle header should be set to

Cache-Control: no\-cache

so that each service worker update will trigger a request for the root page. but the rest of the resources:

'/script-v123.js',  
'/styles-v234.css',  
'/img-v123.jpg',

will have this Cache-Control setting:

Cache-Control: max\-age=31536000

They will only be downloaded if their URL has changed.

## Embedded Content